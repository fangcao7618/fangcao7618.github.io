
---

title: 如何以光速查看一行代码的提交记录

date: 2019-06-18 20:01:33 +0800

tags: []

---
❓这行代码谁写的 ？<br />在多人协作的项目中进行开发，总是会遇到这些问题：<br />- 这行代码谁写的？明显是个坑，上线肯定是个故障。<br />- 这行代码谁写的？相当优雅，得学习下。<br />- 这行代码谁写的？看不懂，得咨询下。<br />- 这行代码谁写的？不是我呀，得查一下。<br />好，问题来了，这行代码谁写的？
<a name="vHwGg"></a>
## 怎么查是谁写的？
<a name="vUvBi"></a>
## 💢命令行工具 git blame
例如，查询 request.js 第 99 行代码是谁提交的，命令为：
```
$ git blame -L 99,99 request.js
-> dadd208596 lib/core/app/extend/request.js (fengmk2 2016-07-17 12:48:09 +0800 99)    * @member {String} Request#ip
```

即使把这个命令设置为快捷方式，一行一行的查询也是非常耗费精力的，那么有没有一眼可以看到的方式呢？那就是直接在 GitHub 上查。
<a name="VHqNV"></a>
## 😑使用 GitHub 查询
直接打开 [GitHub 查询 request.js 提交记录](https://link.zhihu.com/?target=https%3A//github.com/eggjs/egg/blame/master/app/extend/request.js)，就可以看到了。<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/263301/1560859337878-3f0b777c-1518-4bad-9b70-90d545eec018.jpeg#align=left&display=inline&height=501&originHeight=501&originWidth=720&size=0&status=done&width=2048)<br />然而，代码敲的好好的，能不能不切换窗口呢？那就是使用各大 IDE 的插件实现了。
<a name="FDHNE"></a>
## 🔥使用 VS Code 查询
VS Code 在我的电脑上存在有两个原因：<br />- 写 TypeScript<br />- 使用 Git Blame 插件<br />主要说一下 Git Blame 插件，迄今为止用过的最方便的查询代码提交记录的工具，来张截图感受下：<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/263301/1560859337848-4fdc3387-71a0-49dd-97df-6326f996f229.jpeg#align=left&display=inline&height=973&originHeight=342&originWidth=720&size=0&status=done&width=2048)<br />光标在哪行，状态栏就显示该行代码的提交者。如果你使用 VS Code 用户，恭喜你，已经完美解决了本篇文章的问题。如果你喜欢轻量级编辑器，喜欢秒开，喜欢像特斯拉 P100D 一样百公里加速 2.5 秒的感觉，那就接着往下看吧。
<a name="Xa6VV"></a>
## 🌟使用 Sublime Text 查询
好好好，你要的，都给你。<br />安装 Git Blame 插件后，需要在光标所在行启动命令框，输入："Git Blame"，效果如下：<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/263301/1560859337852-8e2b7b69-0978-4d1c-9e36-a00f9bd7fd37.jpeg#align=left&display=inline&height=1084&originHeight=381&originWidth=720&size=0&status=done&width=2048)<br />重点到了，身为 VIM 用户，我们的插件呢？
<a name="lZt0c"></a>
## 🚀在 VIM 中使用 git-blame.vim 快速查询
我是一只小小鸟，想要飞呀却飞也飞不高
我遨游在 GitHub 中，寻找着 VIM 适合的查询插件，[tpope/vim-fugitive](https://link.zhihu.com/?target=https%3A//github.com/tpope/vim-fugitive) 太重，没有个轻量的插件么？[git-blame.vim](https://link.zhihu.com/?target=https%3A//github.com/zivyangll/git-blame.vim) 横空出世！先看效果：<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/263301/1560859337858-56ce85e1-0751-4f7e-9c4b-5e2ed06f1989.jpeg#align=left&display=inline&height=671&originHeight=236&originWidth=720&size=0&status=done&width=2048)![](https://cdn.nlark.com/yuque/0/2019/jpeg/263301/1560859337864-d1f4c462-6ea1-4ba5-8bb2-327e1c715769.jpeg#align=left&display=inline&height=671&originHeight=236&originWidth=720&size=0&status=done&width=2048)![](https://cdn.nlark.com/yuque/0/2019/jpeg/263301/1560859337868-db4cc72c-dad6-4001-b2f6-30d99a541285.jpeg#align=left&display=inline&height=671&originHeight=236&originWidth=720&size=0&status=done&width=2048)<br />怎么做到的？只需要同时按 `,s` 即可。当然也支持自定义快捷键了。<br />对实现感兴趣，请戳 [git-blame.vim 代码仓库](https://link.zhihu.com/?target=https%3A//github.com/zivyangll/git-blame.vim)
<a name="ZJJja"></a>
## 🔧安装
最直接的方式：
```
cd ~/.vim/bundle
git clone git@github.com:zivyangll/git-blame.vim.git
```
如果你跟你一样用的是 [Vundle](https://link.zhihu.com/?target=https%3A//github.com/VundleVim/Vundle.vim)：
```
Plugin 'zivyangll/git-blame.vim'
```
<a name="cqI58"></a>
## 👏使用
在 .vimrc 中设置快捷键“逗号+s“：
```
nnoremap <Leader>s :<C-u>call gitblame#echo()<CR>
```
若未设置 Leader，建议设置为逗号：
```
let mapleader = ","  " map leader键设置
let g:mapleader = ","
```

<a name="C1BLd"></a>
## 如果你是 VIM 新手，一键上手
没有用过 VIM 没关系，可以参考我的 vim 配置：[zivim](https://link.zhihu.com/?target=https%3A//github.com/zivyangll/zivim)，一键安装：
```
$ curl -k https://raw.githubusercontent.com/zivyll/zivim/master/install.sh
```
配置文件及其适合新手阅读和学习，截两张图<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/263301/1560859337867-1a0a23da-b292-44ae-b230-aea918ecfda2.jpeg#align=left&display=inline&height=1290&originHeight=412&originWidth=720&size=0&status=done&width=2254)![](https://cdn.nlark.com/yuque/0/2019/jpeg/263301/1560859337900-9ff6e1c2-16dd-44d7-b893-ca1b2b776310.jpeg#align=left&display=inline&height=1890&originHeight=576&originWidth=720&size=0&status=done&width=2362)
<a name="VidiQ"></a>
## 🔚结束语
如果你觉得这个插件对你有帮助，不要吝啬你的 star：[zivyangll/git-blame.vim](https://link.zhihu.com/?target=https%3A//github.com/zivyangll/git-blame.vim)，哈哈😄，也可以在 [vim.org](https://link.zhihu.com/?target=https%3A//www.vim.org/scripts/script.php%3Fscript_id%3D5704) 投出你宝贵的一票。<br />使用中有任何问题请提 issue。

转自：[https://zhuanlan.zhihu.com/p/37599990](https://zhuanlan.zhihu.com/p/37599990)

